# backend_robots

Код Django приложения предназначен для управления заказами роботов и включает в себя следующие ключевые шаги:

- Определение моделей:

    - Customer: Модель для хранения информации о клиентах, включая их электронные адреса.
    - Order: Модель для хранения заказов клиентов, связанных с роботами.
    - Сигнал send_email:

- Сигналы

    - Создается сигнал post_save, который запускается после сохранения экземпляра модели Robot.
    - Внутри сигнала происходит отправка электронного письма клиентам, которые ранее интересовались роботами с теми же характеристиками.

- Форма OrderForm:

    - Определена форма для ввода данных заказа, включая электронный адрес клиента и серийный номер робота.
    - Обработка заказов в представлении index:
    - Если запрос от клиента является POST-запросом, то данные из формы заказа обрабатываются. Создается заказ и связывается с соответствующим клиентом.Если робот с указанным серийным номером существует, отправляется уведомление клиентам, которые интересовались этим роботом.

- Определение URL-маршрутов:

    - Созданы URL-маршруты, которые определяют, какие представления (views) должны обрабатывать запросы на определенные URL.

    - http://127.0.0.1:8000/ - форма заказа
    - http://127.0.0.1:8000/reports/ - возможность скачать эксель файл со всеми роботами в базе.

- Что можно делать с роботами:

    - Получить всех роботов - http://127.0.0.1:8000/robots/ (GET)
    - Создать робота - http://127.0.0.1:8000/robots/ (POST)
            {
                "serial": "XS-15",
                "model": "15",
                "version": "XS",
                "created": "2023-01-01 00:00:00"
            }
    - Изменить робота - http://127.0.0.1:8000/robots/id/ (PUT) (id - номер робота)
            {
                "serial": "R2-D2",
                "model": "R2",
                "version": "D2",
                "created": "2022-12-31T23:52:59Z"
            }
    - Удалить робота - http://127.0.0.1:8000/robots/3/ (DELETE) (id - номер робота)


- Принцип работы этого кода заключается в следующем:

    Клиенты могут отправлять заказы, заполняя форму на странице index.
    После отправки формы данные о заказе сохраняются в модели Order, и, если необходимо, отправляется уведомление клиентам о наличии робота с указанным серийным номером. Сигнал post_save слушает изменения в модели Robot и отправляет уведомления, если появляется робот с интересующими клиентов характеристиками. Доступ к различным функциям приложения осуществляется через URL-маршруты, которые связывают URL-адреса с соответствующими представлениями.

- Запуск проекта:

    - Клонировать репозиторий
    - Установить виртуальное окружение
        - python -m venv venv (создает окружение)
        - venv/Scripts/activate (включает окружение)
        - deactivate (отключает окружение)
    - Установить зависимости - pip install -r requirements.txt
    - Создать файлик .env в него внести параметры вашей почты
        - EMAIL_HOST_USER = '####' - почта
        - EMAIL_HOST_PASSWORD = '####' - пороль к ней
    - Сделать миграции - python manage.py migrate
    - Создать суперюзера - python manage.py createsuperuser (не обязательно)
    - Запустить проект - python manage.py runserver


- Как работает:

    - Заполняем форму. Вводим почту, на которую хотим получить письмо и серию, которая нас интересует например R2-D2
    - Через Postman на адрес http://127.0.0.1:8000/robots/ посылаем POST запрос с json. Например:
        {
            "serial": "R2-D2",
            "model": "R2",
            "version": "D2",
            "created": "2023-09-29 14:04:44"
        }
    - Получаем письмо на почту, которую указали.

    - Чтобы скачать информацию о роботах в эксель файле нужно перейти на страницу http://127.0.0.1:8000/reports/ и нажать на кнопку "скачать".
